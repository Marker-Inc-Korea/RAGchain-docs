# Google Search Pipeline

## Overview
The `GoogleSearchRunPipeline` class is an implementation of a pipeline that interacts with the Google Search API.
It is part of the `RAGchain` project's `pipeline` module.
he pipeline performs three tasks: retrieve search results, generate answers to questions using a language model, and wrap the results in a `Passage` object for further processing. 

The `GoogleSearchRunPipeline` class uses the `GoogleSearch` class from the `websearch` module and the `BaseLLM` class from the `langchain` utilities.
It returns a list of `Passage` objects as the search results and a list of answers generated by the language model.

## Usage

#### Initialize
To create an instance of `GoogleSearchRunPipeline`, you need to provide an instance of a language model (`BaseLLM`).

Optionally, you can specify a `RAGchainPromptTemplate` for generating prompts, and an integer for the number of Google search results to be used for question answering.

Here is a basic example of how to instantiate the `GoogleSearchRunPipeline` class:

```Python
from RAGchain.pipeline import GoogleSearchRunPipeline
from langchain.llms.openai import OpenAI

llm = OpenAI(model_name="babbage-002")
pipeline = GoogleSearchRunPipeline(llm)
```

#### Ask
After instantiating the `GoogleSearchRunPipeline` class, you can use the `run.invoke` method to ask a question and get an answer. 
This method requires a dictionary with a "question" key and the question string as the value. 

You can also use the `get_passages_and_run` method to ask multiple questions at once.
This method requires a list of question strings and returns a tuple containing a list of answers, a list of lists of `Passage` objects, and a list of lists of relevance scores. 

Here is a basic example of how to ask questions using the `GoogleSearchRunPipeline` class:

```Python
# Ask a single question
answer = pipeline.run.invoke({"question": "What is the capital of France?"})
print(answer)

# Ask multiple questions
questions = ["What is the capital of France?", "What is the capital of Germany?"]
answers, passages, scores = pipeline.get_passages_and_run(questions)
print(answers)
```

Please note that you need to set up the proper API keys and environment variables for the Google Search API. 
Create the `GOOGLE_API_KEY` in the Google Cloud credential console and a `GOOGLE_CSE_ID` using the Programmable Search Engine.
